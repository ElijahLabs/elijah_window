# Elijah Window - 圣经投影软件 灵歌投影软件

![image](https://github.com/ElijahLabs/elijah_window/raw/master/screenshot1.png)

Elijah Window是一款免费的圣经投影软件、灵歌投影软件工具框架。

若您要发表评论或提交问题，[请戳这里](https://github.com/ElijahLabs/elijah_window/issues)

-----


# 灵歌投影软件开发备忘


20:30 2011/5/10
修正控制台中编辑歌词时按回车键会触发搜索功能的缺陷

23:51 2011/5/2
制作音乐列表功能，目前除了搜索功能，其余都已完成，
例如新建歌词，改名，改词，添加歌曲，移除歌曲，歌曲排序等等

17:47 2011/5/1
制作一些对专辑操作的功能，如新建、删除。

20:26 2011/4/16
开始制作音乐列表的编辑功能，使用的方便性和音乐搜索是重点

16:36 2011/4/10
制作了几个按钮的功能，例如下一曲，下一页，保存修改等。

22:34 2011/4/6
制作了显示标题功能。
下一步完善主界面的控件与配置文件之间的关联操作和音乐列表的编辑窗体，
以及原创音乐推荐的窗体

21:54 2011/4/5
去除了左侧多余的偏移造成的空格，继续制作居中
居中制作完成
在每个换行的后面，计算本行（向前查找y相同的，x递减）的字符串最大宽度与
投影屏幕窗口的宽度的差值a，然后将本行字符串整体向右偏移1/2 * a，则完成居中。

22:34 2011/4/4
最后一页好用了，下一步制作文字居中对齐显示

18:03 2011/4/3
显示位置正确，可翻页，但翻到最后一页时会出错，
原因是最后一页的最后一个字符的位置没有存入到分页数组中_iEnd

0:25 2011/4/1
能显示出字了，只是位置有些乱，LOL。


21:47 2011/3/30
重新整理思路，如何分页显示：
- 二维数组存储歌词位置
- 歌词原始字符串始终不变
- 歌词显示字符串每次显示时都重新生成
- 每页歌词有两个游标，起始字符序号和结束字符序号，在计算位置时得到
- 遍历歌词，遇到\r\n换行，\r\n的位置不记录，等待整个歌词的位置全部计算完成后，将\r\n都删除掉
- 长度不够显示下一个字时换行，x偏移归0，y加一倍字高，加一倍行间距
- 高度超一页时，二维数组第一维度增加1，x、y偏移归0
- 默认显示第一页，页码游标（索引）
将思路写成了代码，但是没有调试通过，下一步继续调试


23:19 2011/3/27
在onpaint中计算单个字符尺寸，下一步继续制作显示，计算歌词字符位置

17:22 2011/3/26
制作显示，先把边距、间距等参数改成像素的，因为这次字的尺寸计算准确

21:25 2011/3/23
x决定暂时的使用wmp上一首，下一首的功能暂时不做
页数如何控制？
把当前列表中的歌曲遍历一次，得出最大的数组
把所有的文字位置都计算出来，存入N个数组中，根据当前的页码显示某个数组的字即可。

22:16 2011/3/19
按照目录拆解，显示歌曲名字，播放歌曲
D:\赞美诗歌大全\诗歌\01赞美诗选编1050首\001-050
下一步制作播放器内部支持上一首，下一首，既将歌曲放入播放列表
及显示歌词

1:42 2011/3/16
完成类型列表和专辑列表显示和自动定位到上次播放的列表
下一步制作获取歌曲并显示在歌曲列表中

0:46 2011/3/13
理论上应该完成了所有的技术突破。
以后的开发计划如下：
- 显示音乐列表
- 显示歌词幻灯
- 编辑音乐列表
  - 本地搜索，网络搜索
  - 编辑歌词
- 音乐速递
- 播放控制，系统操作和设置等


13:45 2011/3/12
确定用MeasureDriverString计算字符的尺寸，
之前尝试的MeasureString和GraphicsPath.GetBounds测量结果与绘制字符的函数不符。

23:37 2011/2/27
窗体基本设计完，FormLoad里写了一部分，下一步继续完成控制窗体部分，
再做投影屏幕的窗体

23:41 2011/2/23
搞定播放音乐，进度条等，使用wmp.dll播放的
参考：
http://btw986310.blog.163.com/blog/static/4520074120106613639459/


22:36 2011/2/16

歌曲的文件结构如下：

“\音乐家目录\专辑目录\音乐（mp3）及歌词文件（txt）”

\Musician\Albums\1.mp3

\赞美之泉\2008赞美会\奇异恩典.mp3


1、ListHelper，文件列表，
4）创建自定义列表文件
5）保存自定义列表文件
6）删除自定义列表文件
x1）列出全部音乐家（包括自定义列表）
x2）列出某音乐家的全部专辑
x3）搜索功能，根据歌名或者歌词搜索

2、MusicHelper，歌曲帮助
1）显示歌词
2）保存歌词
3）删除歌词
3）允许在当前屏幕中直接修改歌词并回车键保存

3、显示
1）分页显示
2）显示页码和页数
x4、播放音乐
x1）进度条
x2）暂停
3）

5、基本操作和样式设置等

6、允许通过网络搜索
支持歌名搜索、歌词搜索，从服务器查找、并下载歌词和mp3到本机


23:08 2011/2/3
确定主界面主要放置文本框，用于直接修改歌词

23:40 2011/2/1
技术突破，支持多级目录的目录名与文件名搜索

21:00 2011/1/22
技术突破，使用WPF播放flv,mp3


-----

# 圣经投影软件开发备忘


21:03 2011/1/29
增加了节号颜色选择功能
缩小了节号与经文的距离
经文列表，强制按照文件名称升序排序
经文列表，默认打开上一次选择的列表

14:41 2011/1/22
增加了滚轮控制经文卷动功能
增加了右键菜单控制上处经文、下处经文、全屏、退出全屏功能
修正了经文列表为空时，上处经文、下处经文功能的BUG

13:24 2011/1/13
修正了保存空列表时弹出2次文件名称对话框的BUG
增加了设置左边距功能
修正了字间距和行间距太大的BUG

23:06 2011/1/10
加入鼠标拖动经文功能
修正字间距比例和行间距比例

20:19 2011/1/9
字间距与边距挂钩功能

2010/1/6
改进了幻灯窗体中悬浮选择经文的弹出位置，保证其全部显示
增加了拼音选择经文时的输入验证，避免输入不正确的章和节等

20:49 2011/1/4
搞定绘制170节经文卡的问题，去掉了抗锯齿。

16:30 2011/1/3
虽然改成了一次计算经文位置的方式，但是在绘制170节经文时会卡，
想办法只绘制当前屏幕内的经文。
解决了闪烁问题，开启窗体的DoubleBuffered即可
自动归到屏幕顶端搞定

17:31 2010/12/31
在配置低的机器中，在卷动时经文有闪烁
修正了切换经文时，没有自动归到屏幕顶端的BUG

23:48 2010/12/29
已处理完行间距，
基本功能完成，下一步是投影屏幕中的键盘控制和拼音查询了

13:38 2010/12/29
行间距做的不对，那个是单个字的边距，应该独立增加一个行间距的变量
下一步做行间距，和对投影屏幕的卷动控制等

23:50 2010/12/28
完成了listview点选经文及部分移植经文列表功能。
下一步把列表功能移植完全，并且做拼音和投影屏幕中的鼠标浮动选择功能及颜色字体等。

22:45 2010/12/27
完成了新增的listview中选择的方式显示经文，
下一步做把显示的经文添加到右侧经文列表中，并管理列表和其他控制功能的移植

13:08 2010/12/26
做到FromControl里的填充listViewVolume的内容了

17:46 2010/12/11
决定不单独设置节号的样式了，与经文做成一致的。

12:44 2010/12/4
制作尝试使用多屏幕显示方式，播放内容和控制部分列表分开。

13:31 2010/11/25
完成了卷、章、开始节与结束节的选择，下一步要与经文的显示相连接，
并且控制这4个面板的隐藏与显示等

13:13 2010/11/24
完成了起始节ID显示的控件填充，下一步要做结束节ID的显示

13:39 2010/11/23
获取最大节ID的函数写完了

13:09 2010/11/23
目前做到鼠标选择经文控件，目前能接收reader和字符串数组，来显示经文和章节链接，
